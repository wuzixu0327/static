(()=>{function e(e){e.directive("mask",((i,{value:r,expression:u},{effect:a,evaluateLater:s})=>{let o=()=>u,c="";if(["function","dynamic"].includes(r)){let t=s(u);a((()=>{o=l=>{let r;return e.dontAutoEvaluateFunctions((()=>{t((e=>{r="function"==typeof e?e(l):e}),{scope:{$input:l,$money:n.bind({el:i})}})})),r},f(i)}))}else f(i);function f(e,n=!0){let i=e.value,r=o(i);if(c.length-e.value.length==1)return c=e.value;let u=()=>{c=e.value=function(e,n){if(""===e)return"";let i=t(n,e);return l(n,i)}(i,r)};n?function(e,n,i){let r=e.selectionStart,u=e.value;i();let a=u.slice(0,r),s=l(n,t(n,a)).length;e.setSelectionRange(s,s)}(e,r,(()=>{u()})):u()}i.addEventListener("input",(()=>f(i))),i.addEventListener("blur",(()=>f(i,!1)))}))}function t(e,t){let l=t,n="",i={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},r="";for(let t=0;t<e.length;t++)if(["9","a","*"].includes(e[t]))r+=e[t];else for(let n=0;n<l.length;n++)if(l[n]===e[t]){l=l.slice(0,n)+l.slice(n+1);break}for(let e=0;e<r.length;e++){let t=!1;for(let u=0;u<l.length;u++)if(i[r[e]].test(l[u])){n+=l[u],l=l.slice(0,u)+l.slice(u+1),t=!0;break}if(!t)break}return n}function l(e,t){let l=Array.from(t),n="";for(let t=0;t<e.length;t++)if(["9","a","*"].includes(e[t])){if(0===l.length)break;n+=l.shift()}else n+=e[t];return n}function n(e,t=".",l){l=","===t&&void 0===l?".":",";let n=e.replaceAll(l,""),i=Array.from({length:n.split(t)[0].length}).fill("9").join("");return i=((e,t)=>{let l="",n=0;for(let i=e.length-1;i>=0;i--)e[i]!==t&&(3===n?(l=e[i]+t+l,n=0):l=e[i]+l,n++);return l})(i,l),e.includes(t)&&(i+=`${t}99`),queueMicrotask((()=>{this.el.value.endsWith(t)||this.el.value[this.el.selectionStart-1]===t&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)})),i}document.addEventListener("alpine:init",(()=>{window.Alpine.plugin(e)}))})();